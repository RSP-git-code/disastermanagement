{% extends "base.html" %}
{% block title %}Welcome{% endblock %}
{% block content %}

<!-- Hero Section -->
<div class="hero-section d-flex align-items-center justify-content-center text-center" 
     style="height:100vh; background: url('https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80') center/cover no-repeat;"
     id="main-content">

  <div class="overlay" style="background: rgba(0,0,0,0); position:absolute; top:0; left:0; right:0; bottom:0;"></div>

  <div class="content position-relative text-white">
    <!-- Typing fun facts -->
    <div class="typing mb-3" id="funfact"></div>

    <!-- Main heading -->
    <h1 class="display-3 fw-bold">Welcome to Disaster Predictor</h1>
    <p class="lead mb-4">Data analysis of disasters using ML and statistics</p>

    <div>
      {% if not user.is_authenticated %}
        <a href="{% url 'login' %}" class="btn btn-primary btn-lg me-3">Login</a>
        <a href="{% url 'signup' %}" class="btn btn-success btn-lg">Sign Up</a>
      {% else %}
        <a href="{% url 'worldmap' %}" class="btn btn-warning btn-lg me-3">🌍 Explore World View</a>
        <a href="{% url 'country' %}" class="btn btn-info btn-lg">📊 Analyze by Country</a>
      {% endif %}
    </div>
  </div>
</div>

<script>
  const funFacts = [
    "🐾 Animal Incident — Human–wildlife conflict, livestock losses or diseases.",
    "🦠 Epidemic — Rapid spread of infectious diseases affecting communities.",
    "🌊 Flood — Overflowing rivers or heavy rainfall inundating land.",
    "🌋 Volcanic Eruption — Lava, ash and gases ejected violently.",
    "🌪 Cyclone — Strong rotating winds with heavy rainfall.",
    "🌍 Earthquake — Ground shaking due to tectonic plate movements.",
    "🔥 Wildfire — Fast spreading fires consuming forests and grasslands.",
    "🌡 Heatwave — Prolonged extreme heat affecting people and crops.",
    "❄ Cold Wave — Extreme cold spells causing frost and snow disasters.",
    "🥵 Drought — Long dry periods causing water scarcity.",
    "💨 Landslide — Rock and soil collapse due to rain or earthquakes.",
    "🌐 Tsunami — Huge sea waves triggered by undersea quakes or eruptions.",
    "💥 Industrial Accident — Explosions, chemical leaks, or man-made disasters."
  ];

  let factIndex = 0;
  let charIndex = 0;
  let typingElement = document.getElementById("funfact");
  let isDeleting = false;

  // Funfacts typing effect
  function typeEffect() {
    let currentFact = funFacts[factIndex];

    if (isDeleting) {
      typingElement.textContent = currentFact.substring(0, charIndex--);
    } else {
      typingElement.textContent = currentFact.substring(0, charIndex++);
    }

    if (!isDeleting && charIndex === currentFact.length) {
      isDeleting = true;
      setTimeout(typeEffect, 2000);
      return;
    } else if (isDeleting && charIndex === 0) {
      isDeleting = false;
      factIndex = (factIndex + 1) % funFacts.length;
    }

    setTimeout(typeEffect, isDeleting ? 50 : 100);
  }

  // Start typing effect immediately
  window.onload = () => {
    typeEffect();
  };
</script>

{% endblock %}
